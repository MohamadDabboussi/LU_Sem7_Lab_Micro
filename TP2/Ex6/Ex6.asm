           ORG $1000
PORTA EQU $E001
PORTB EQU $E003

START EQU $0C
A EQU $04
B EQU $02
C EQU $01

ADVANCE EQU $80
RETREAT EQU $40
STOP EQU $00

           CLR.B PORTB
           CLR.L D0
WAITSTART
	Move.b PORTA,D0
	CMP.B #START,D0
	BNE WAITSTART
	Move.b #ADVANCE,PORTB
WAITB0
	Move.b PORTA,D0
	CMP.B #B,D0
	BNE WAITB0
	Move.b #ADVANCE,PORTB
WAITC0
	Move.b PORTA,D0
	CMP.B #C,D0
	BNE WAITC0
	Move.b #RETREAT,PORTB
WAITB1
	Move.b PORTA,D0
	CMP.B #B,D0
	BNE WAITB1
	Move.b #ADVANCE,PORTB
WAITC1
	Move.b PORTA,D0
	CMP.B #C,D0
	BNE WAITC1
	Move.b #RETREAT,PORTB
WAITA1
	Move.b PORTA,D0
	CMP.B #A,D0
	BNE WAITA1
	Move.b #STOP,PORTB
	bra WAITSTART
	end $1000

